<h1>clasquinator</h1>

<p>This folder contains a library for yabasic that allows yabasic to display a variety of dialogs in text mode without making use of external commands.</p>

<p><em>Some</em> routines will also be made available in graphics mode, but keep in mind that you only have one graphics window to play with. if you use these, you will not have the graphics window for your own use.</p>

<p>The library is written as a textmode application and must be run in a terminal. It will not be useful in a headless script.</p>

<p>The entire set of libraries focuses on sane defaults and getting basic functionality into yabasic.</p>

<p>The images below are for illustration only. The exact appearance of the dialogs will depend on your system settings.</p>

<p>Developed on elementary OS 0.4 "Loki" (i.e. Linux), but it should work on any *NIX system that will run yabasic. I don't have a Windows machine to test this on, so please let me know if anything works/doesn't work on that side.</p>

<p>The library should exist either in the same folder as your program (symlinks work) or in the standard yabasic library location on your system.</p>

<p>To use the library, use the command </p>

<pre><code>import clasquinatorlib
</code></pre>

<p>You should <strong>not</strong> use this library and one of the others in this set that provides dialogs concurrently, because they replicate subroutine names. Pick the right one for your program and stick with it!</p>

<p>Unlike the other libraries, you cannot use \n to break a line in your text variables. Keep that in mind if compatibility between the libraries is important.</p>

<p>By default, widgets are drawn in <span style="color:cyan; background-color:black">cyan</span>, with button and menu triggers in <span style="color:red; background-color:black">red</span> and the title in <span style="color:blue; background-color:black">blue</span>. But you can override this by setting the GLOBAL variables <em>menu_colour$</em>, <em>title_colour$</em> and <em>trigger_colour$</em>.</p>

<p>The colours available are the normal ones yabasic can handle, namely "black", "white", "red", "blue", "green", "yellow", "cyan" and "magenta" (which can be abbreviated as "bla", "whi", "red", "blu", "gre", "yel", "cya" and "mag" respectively). The library does not check if the two colours are identical, or if they complement each other visually. If you want to make your menus unreadable, more power to you!</p>

<p>The background colour of widgets is always black, but your program's colours will be restored to whatever they were before.</p>

<p>The "buttons" are not mouse-aware.</p>

<p>The first letter of each button or menu item automatically becomes the trigger. Both lower and upper case variants will activate it. It is up to you to ensure that you do not use menu items that start with the same letter. </p>

<p><em>Hint</em>: You can always number them, e.g.</p>

<pre><code>menuitem1$ = "1.File"
</code></pre>

<p>This will make the menu react to the "1" key being pressed, rather than "f" or "F".</p>

<p>If the text of a message (usually in the variable <em>text$</em>) is too long to fit in one line, it will be truncated. This may vary with the width of the user's terminal window, so be conservative!</p>

<p>Excessive quote marks (required in other libraries and often supplied by EncloseText$() or \"\") will be removed by the library to maintain compatibility. </p>

<p>Excessive spaces at the <em>front and back</em> of <em>text$</em> will be trimmed, but multiple spaces <em>within</em> <em>text$</em> will be maintained.</p>

<p>This library is currently still in the development stages and not really usable. But watch this space!</p>

<h2>Variables</h2>

<p>This library requires a small number of <em>global</em> variables. You do not need to initialize them, but don't use the following variable names in your program.</p>

<ul>
<li><em>menu_colour$</em></li>
<li><em>title_colour$</em></li>
<li><em>trigger_colour$</em></li>
<li><em>screenheight</em></li>
<li><em>screenwidth</em></li>
</ul>

<h2>Routines available:</h2>

<p>This library poaches as many ideas as possible from the other four dialog-providing libraries, but there is not 100% compatibility here, so we will not divide things into Common and Clasquinator-specific sections.</p>

<ul>
<li><p><strong>ClearDlg</strong>() - on dialog and whiptail, this clears the dialog from your terminal. Same as the yabasic command CLEAR SCREEN, but may work better if you are expecting to issue another Linux command immediately. On zenity, clasquinator and kdialog, dummy routines are provided for compatibility so that you do not need to rewrite your code.</p></li>
<li><p><strong>EncloseText$</strong>(thestring$) - A simplified version of the <em>EncloseString$</em>() routine that can be found in the <em>linuxmisclib</em> library</p>

<ul>
<li>Encloses a string in double quotes, if it isn't already.</li>
<li>Therefore <em>a$ = EncloseText$("This is text")</em> gives the same result as <em>a$ = "\"This is text\""</em></li>
<li>Mostly for use with filenames that may include spaces.</li>
</ul></li>
<li><p><strong>getcmd$</strong>() - returns the command set available.</p>

<ul>
<li>This is really just for me, to stop me from getting confused while I am editing four libraries simultaneously. </li>
<li>However, you could use it to test which utility (or library, in the case of clasquinator) is currently in use and if it is safe to use routines not in the common list.</li>
<li>e.g, <em>if getcmd$() = "clasquinator" SubmenuDlg(options ....)</em></li>
<li>or  <em>if getcmd$() = "zenity" ZNotifyDlg("this is a notification")</em></li>
</ul></li>
<li><p><strong>GetDirDlg$</strong>(title$, text$, start$) - Select a directory to open.</p>

<ul>
<li>Displays the available directories but requires user to type it in.</li>
<li>The value <em>title$</em> is the title on top of the widget</li>
<li>The value <em>start$</em> is the initial directory to start from. If blank or not supplied,this defaults to the current directory.</li>
<li>Data entry is CASE-SENSITIVE, but you do not need to type the quote marks supplied for filenames with spaces.</li>
<li>Result is returned as a string value with quote marks and extra (leading or trailing) spaces stripped off.</li>
<li>An empty string is returned, if there are no existing directories.</li>
<li>ONLY available in <em>clasquinator</em>, but there are equivalents in <em>zenity</em> and <em>kdialog</em>.</li>
<li>Currently only works in linux. I'll get to a windows version soon.</li>
<li><em>Example</em>:
<code>
a$ = GetDirDlg$("Pick a folder", "Which directory would you like to see?","~")
</code>
<img src="./imgs/GetDirDlg.png" alt="GetDirDlg" title="" /></li>
</ul></li>
<li><p><strong>GetFileDlg$</strong>(title$, text$, start$) - Select a file to open.</p>

<ul>
<li>Displays the available files but requires user to type it in.</li>
<li>The value <em>title$</em> is the title on top of the widget</li>
<li>The value <em>start$</em> is the initial directory to start from. If blank or not supplied,this defaults to the current directory.</li>
<li>Data entry is CASE-SENSITIVE, but you do not need to type the quote marks supplied for filenames with spaces.</li>
<li>Result is returned as a string value with quote marks and extra (leading or trailing) spaces stripped off.</li>
<li>An empty string is returned. if there are no existing files. </li>
<li>ONLY available in <em>clasquinator</em>, but there are equivalents in <em>zenity</em> and <em>kdialog</em>.</li>
<li>Currently only works in linux. I'll get to a windows version soon.</li>
</ul></li>
<li><p><strong>InputDlg$</strong>(text$, title$, ok$, cancel$) - Presents a one-line dialog into which the user can type a string answer.</p>

<ul>
<li>The value <em>title$</em> is the title on top of the widget</li>
<li>The values <em>ok$</em> and <em>cancel$</em> are not used in clasquinator and may be omitted. They are kept in the code for compatibility reasons.</li>
<li>ENTER accepts the input, which can also be an empty string.</li>
<li>The empty string counts as the equivalent of a cancel button.</li>
<li>The result is returned as a string value.</li>
<li><em>Example:</em>
<code>
a$ = InputDlg$("What is your name?", "Who are you?")
</code>
<img src="./imgs/InputDlg.png" alt="InputDlg" title="" /></li>
</ul></li>
<li><p><strong>MakeDirDlg$</strong>(title$, text$, start$) - Create a directory.</p>

<ul>
<li>Same as <em>GetDirDlg$()</em> but allows user to type a new filename so that it can be created.</li>
<li>Will not allow duplicate filenames to be selected.</li>
</ul></li>
<li><p><strong>MakeFileDlg$</strong>(title$, text$, start$) - Create a file.</p>

<ul>
<li>Same as <em>GetFileDlg$()</em> but allows user to type a new filename so that it can be created.</li>
<li>Will not allow duplicate filenames to be selected.</li>
</ul></li>
<li><p><strong>MenuDlg</strong>(title$, menustring$, level, mainmenustring$) - Create a one-line menu of options for the user to choose from.</p>

<ul>
<li>The value <em>title$</em> is the title on top of the widget.</li>
<li>The value <em>menustring$</em> is the list of menu options as a single string, separated by hash signs (#). Spaces are allowed.</li>
<li>The value <em>level</em> can be either 0 for a primary menu or 1 for a submenu.</li>
<li>If <em>level</em> = 1 <em>mainmenu$</em> must also be supplied, otherwise it is not required. This is the <em>menustring$</em> of the originating menu.</li>
<li>The first letter of menu item automatically becomes the trigger. Both lower and upper case variants will activate it. It is up to you to ensure that you do not use menu items that start with the same letter.</li>
<li>Menus will only be displayed to the width of the terminal, so keep them short!</li>
<li>Results are returned as a string variable, which will be the trigger in <em>lowercase</em>.</li>
<li>Submenus can also be created with the <em>SubMenuDlg$(title$, menustring$)</em> routine, which is an alias to this one and does not require the <em>level</em> parameter.Therefore the following two commands are completely equivalent:
<code>
MenuDlg$("File menu","Open#Close#Exit",1, "File#Edit#Help")
SubMenuDlg$("File menu","Open#Close#Exit","File#Edit#Help")
</code></li>
</ul></li>
<li><p><em>Examples:</em>
<code>
a$ = MenuDlg$("Main Menu", "File#Edit#Help", 0)
</code>
<img src="./imgs/MenuDlg.png" alt="MenuDlg" title="" />
<code>
a$ = MenuDlg$("Help Menu", "Help#About", 1, "File#Edit#Help")
</code>
<img src="./imgs/SubMenuDlg.png" alt="SubMenuDlg" title="" /></p></li>
<li><p><strong>MessageDlg</strong>(text$, ok$) - Display a simple message with an OK button.</p>

<ul>
<li>The value <em>ok$</em> is the text of the accept button, normally OK.</li>
<li>You only have one line to play with, so keep those messages short!</li>
<li>Returns nothing, therefore does not actually trap the keypress. But the trigger is highlighted to ensure uniformity among the library's widgets</li>
<li><em>Example:</em>
<code>
MessageDlg("This is a simple message dialog. Close it with ENTER or o.","OK")
</code>
<img src="./imgs/MessageDlg.png" alt="MessageDlg" title="" /></li>
</ul></li>
<li><p><strong>PasswordDlg$</strong>(text$, title$, ok$, cancel$)</p>

<ul>
<li>Supplied for compatibility purposes, but here it is just an alias for <em>InputDlg</em>() - inputs are not obfuscated with asterisks.</li>
</ul></li>
<li><p><strong>RadioDlg$</strong>(title$, menustring$, level, mainmenustring$) - in <em>clasquinator</em>, this is an alias to <em>MenuDlg$()</em>, provided for compatibility.</p></li>
<li><p><strong>SubMenuDlg$</strong>(title$, menustring$, mainmenustring$) - see <em>MenuDlg$()</em>.</p></li>
<li><p><strong>TestForDialogUtility$</strong>() - Routine to test if the called utility actually exists on the system. An empty string returned means it does, otherwise an error message is returned.</p>

<ul>
<li>in <em>clasquinator</em>, this is a dummy routine provided for compatibility. It will always return an empty string.</li>
</ul></li>
<li><p><strong>TextFileDlg</strong>(filename$, title$, exit$) - Displays a text file.</p>

<ul>
<li><strong>To Be Done</strong></li>
</ul></li>
<li><p><strong>YesNoDlg</strong>(text$,yes$, no$) - Displays a dialog with text (normally a question) and the options to reply yes or no.</p>

<ul>
<li>The first letter of the <em>yes$</em> and <em>no$</em> variables will become the hotkeys for those buttons, so make sure they are different. Hotkeys are case-insensitive.</li>
<li><em>no$</em> is actually a dummy here: pressing anything other than the hotkey for <em>yes$</em> will return a no.</li>
<li>NOTE: pressing ENTER means NO. If this is not what you want, just swap the labels <em>yes$</em> and <em>no$</em> around, and <em>yes$</em> will become the dummy that is the default on every keypress except the hotkey for <em>no$</em>.</li>
<li>Returns 1 for yes and 0 for no.</li>
<li>If you would rather get the same result in string format, use <em>YesNoDlg$</em>(text$,yes$, no$)</li>
<li><em>Example:</em>
<code>
YesNoDlg("Can you see this? Press Y if you can.", "Yes!", "No")
</code>
<img src="./imgs/YesNoDlg.png" alt="YesNoDlg" title="" /></li>
</ul></li>
</ul>
